SELECT current_setting('ddl_guard.enabled', true) = 'on' AS ddl_guard_enabled;
 ddl_guard_enabled 
-------------------
 t
(1 row)

SELECT current_setting('is_superuser', true) = 'on' AS is_superuser;
 is_superuser 
--------------
 f
(1 row)

CREATE TABLE IF NOT EXISTS foobar (id serial PRIMARY KEY);
ERROR:  Non-superusers are not allowed to execute DDL statements
HINT:  ddl_guard.enabled is set.
CREATE OR REPLACE FUNCTION foobar_trigger() RETURNS TRIGGER AS $$
BEGIN
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
ERROR:  Non-superusers are not allowed to execute DDL statements
HINT:  ddl_guard.enabled is set.
DROP EXTENSION ddl_guard;
ERROR:  Non-superusers are not allowed to execute DDL statements
HINT:  ddl_guard.enabled is set.
SET ddl_guard.enabled TO off;
ERROR:  permission denied to set parameter "ddl_guard.enabled"
